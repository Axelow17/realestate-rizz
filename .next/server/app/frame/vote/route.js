(()=>{var e={};e.id=807,e.ids=[807],e.modules={399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},517:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},9348:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},412:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},3845:(e,t,r)=>{"use strict";r.r(t),r.d(t,{patchFetch:()=>v,routeModule:()=>g,serverHooks:()=>w,workAsyncStorage:()=>m,workUnitAsyncStorage:()=>y});var o={};r.r(o),r.d(o,{POST:()=>p,dynamic:()=>f});var n=r(2412),a=r(4293),s=r(4147),i=r(7856),l=r(2741),u=r(3272),c=r(1384);let d=process.env.BASE_URL||"http://localhost:3000",f="force-dynamic";async function h(e){try{let t=await e.json().catch(()=>null),r=t?.untrustedData?.fid??t?.fid??null;if(!r)return null;return Number(r)}catch(e){return console.error("Error parsing fid:",e),null}}async function p(e){let t=await h(e);if(!t)return i.NextResponse.json({message:"Missing voter fid"},{status:400});let r=new URL(e.url).searchParams.get("targetFid");if(!r)return i.NextResponse.json({message:"Missing targetFid"},{status:400});let o=Number(r),n=await (0,l.I)(o);if(!n)return i.NextResponse.json({message:"Target user not found"},{status:404});let a=await (0,u.rJ)({fid:o,username:n.username,followers:n.follower_count,following:n.following_count}),s=await (0,u.kC)(t,o),f=`${d}/og/house-card?fid=${o}`,p=`${d}/share?fid=${o}`,g=s.ok?`I just voted for @${a.username}'s house: "${a.houseType}" at ${a.addressLine} ðŸ¡ #RealEstateRizz`:`Tried voting for @${a.username}'s house, but: ${s.reason}`,m=(0,c.I)(g,p),y=[s.ok?`âœ… Vote recorded! Total votes: ${s.voteCount}`:`âš ï¸ ${s.reason}`,"",`Target house: "${a.houseType}"`,`Address: ${a.addressLine}`,`Price vibes: ${a.absurdPrice}`];return i.NextResponse.json({image:f,imageAlt:`Voting for @${a.username}'s house`,text:y.join("\n"),buttons:[{label:"\uD83D\uDCDD Cast about this vote",action:"link",target:m},{label:"\uD83C\uDFC6 View leaderboard",action:"link",target:`${d}/leaderboard`},{label:"\uD83D\uDD19 Back to main frame",action:"post",target:`${d}/frame`}]})}let g=new n.AppRouteRouteModule({definition:{kind:a.RouteKind.APP_ROUTE,page:"/frame/vote/route",pathname:"/frame/vote",filename:"route",bundlePath:"app/frame/vote/route"},resolvedPagePath:"D:\\realestate-rizz\\app\\frame\\vote\\route.ts",nextConfigOutput:"",userland:o}),{workAsyncStorage:m,workUnitAsyncStorage:y,serverHooks:w}=g;function v(){return(0,s.patchFetch)({workAsyncStorage:m,workUnitAsyncStorage:y})}},5303:()=>{},7688:(e,t,r)=>{"use strict";function o(e){return e[Math.floor(Math.random()*e.length)]}function n(e){let t,r,n,a,s;let i=e.followers/Math.max(e.following,1),l="mid";i<.5?l="low":i>2&&(l="high"),"low"===l?(t=o(["Shoebox rental with borrowed Wi-Fi","3\xd73 boarding room that smells like air freshener","Tiny row house next to the train tracks","Budget studio above a noisy street food stall"]),r=o(["Rp 7.2Mâ€¦ kidding, Rp 7.2M in emotional damage, Rp 7.2M vibes only.","Rp 15M including 1 free water dispenser and instant noodles.","Rp 3.5M + two boxes of instant noodles as deposit.","Rp 9.9M flash sale, only today (emotionally)."]),n=2+Math.floor(3*Math.random()),a="High chance of flooding and feelings.",s=o(["High emotional risk, low financial upside.","More risk from neighbors than from the market.","Main hazard: leaks, drama, and group chats.","Beware: thin walls, thick emotions."])):"high"===l?(t=o(["3-floor minimalist mansion just for â€˜healingâ€™","Crypto bro penthouse with no realized profit","Bali-style villa but somehow still in the suburbs","Skyline loft with plants that cost more than rent"]),r=o(["Rp 7.2B because your aura is high risk, high return.","Rp 12B, but youâ€™ll be paying it off in your next life.","Rp 4.5B, discount applied for overthinking.","Rp 9B including private â€˜donâ€™t text my exâ€™ security system."]),n=7+Math.floor(4*Math.random()),a="Good for long-term value, bad for soft quitting.",s=o(["High upside, high drama, billionaire neighbor potential.","Volatile like crypto, but at least you can live in it.","Luxury returns, influencer problems.","Big gains, bigger HOA group chats."])):(t=o(["Type 21++ but renovation failed halfway","Minimalist cluster, maximalist mortgage","Corner house but neighbors own the parking","Starter home with a forever â€˜under constructionâ€™ balcony"]),r=o(["Rp 420M because youâ€™re loyal but over-decorate.","Rp 690M, includes a budget for changing your mind.","Rp 350M, minus repainting the pastel walls.","Rp 500M, but the neighborhood group chat is priceless."]),n=3+Math.floor(4*Math.random()),a="Medium chance of flooding, 100% chance of group chat drama.",s=o(["Moderate risk: flood of feelings once a year.","Safe for living, dangerous for online shopping.","Stable investment, unstable sleep schedule.","Risk: accidental house parties every weekend."]));let u=o(["Base City","Onchain Heights","Warpcast Bay","Layer2 Valley","Gas-Saver Town","Emoji District"]),c=o(["Soft-Launch District","Overthinkerâ€™s Corner","Low-Profile High-Drama Block","Semi-Rich but Tired Avenue","Always-Renovating Street","Late-Rent Lane"]),d=1+Math.floor(200*Math.random()),f=o(["\uD83C\uDFE1","\uD83C\uDF06","\uD83C\uDF03","\uD83C\uDF34","\uD83D\uDEF8","âœ¨"]),h=`${d} ${c} ${f}, ${u}`,p=o(["Main character energy","Side quest enjoyer","Low maintenance, high chaos","Cozy but emotionally expensive","Minimalist aesthetic, maximalist feelings","Air fryer and LED strip supremacy"]),g=`House version of @${e.username}: ${t}`;return{username:e.username,houseType:t,absurdPrice:r,investmentScore:n,investmentNote:a,tagline:g,addressLine:h,city:u,neighborhood:c,vibeLabel:p,riskLabel:s}}r.d(t,{$:()=>n})},2741:(e,t,r)=>{"use strict";r.d(t,{I:()=>n});let o=process.env.NEYNAR_API_KEY;async function n(e){try{let t=await fetch(`https://api.neynar.com/v2/farcaster/user?fid=${e}`,{headers:{api_key:o},cache:"no-store"});if(!t.ok)return console.error("Neynar error:",t.status,await t.text()),null;let r=await t.json(),n=r.user||r.result?.user||r;return{fid:e,username:n.username,follower_count:n.follower_count??n.followerCount??0,following_count:n.following_count??n.followingCount??0,pfp_url:n.pfp_url||n.pfp?.url}}catch(e){return console.error("Error fetching user from Neynar:",e),null}}o||console.warn("NEYNAR_API_KEY is not set. Neynar calls will fail.")},1384:(e,t,r)=>{"use strict";function o(e,t){let r=new URLSearchParams;return r.set("text",e),r.append("embeds[]",t),`https://warpcast.com/~/compose?${r.toString()}`}r.d(t,{I:()=>o})},3272:(e,t,r)=>{"use strict";r.d(t,{Zp:()=>u,ig:()=>i,kC:()=>l,rJ:()=>s});var o=r(7688);let n=new Map,a=new Map;async function s(e){let t=String(e.fid),r=n.get(t);if(r)return r;let a={...(0,o.$)({username:e.username,followers:e.followers,following:e.following}),fid:e.fid,createdAt:new Date().toISOString()};return n.set(t,a),a}async function i(e){return n.get(String(e))??null}async function l(e,t){if(e===t)return{ok:!1,reason:"You cannot vote for your own house."};let r=String(t);if(!n.has(r))return{ok:!1,reason:"Target house does not exist yet."};let o=a.get(r);return(o||(o=new Set,a.set(r,o)),o.has(e))?{ok:!1,reason:"You already voted for this house."}:(o.add(e),{ok:!0,voteCount:o.size})}async function u(e=10){let t=[];for(let[e,r]of n.entries()){let o=Number(e),n=function(e){let t=a.get(String(e));return t?t.size:0}(o);n<=0||t.push({fid:o,username:r.username,houseType:r.houseType,absurdPrice:r.absurdPrice,voteCount:n,createdAt:r.createdAt})}return t.sort((e,t)=>t.voteCount!==e.voteCount?t.voteCount-e.voteCount:e.createdAt.localeCompare(t.createdAt)),t.slice(0,e)}}};var t=require("../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),o=t.X(0,[267,814],()=>r(3845));module.exports=o})();